<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Manager</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Map imports for easier module handling if needed, or just rely on relative paths in modules -->
</head>

<body>

    <!-- START SCREEN OVERLAY -->
    <div id="start-screen-overlay">
        <div class="start-content">
            <button id="close-options-btn"
                style="position: absolute; top: 10px; right: 10px; background: transparent; border: none; color: #666; font-size: 1.5rem; cursor: pointer; display: none;">&times;</button>
            <div class="start-title">DIAMOND MANAGER</div>

            <div class="input-group">
                <label>TEAM NAME</label>
                <input type="text" id="team-name-input" value="Cyber Nine" maxlength="15">
            </div>

            <div class="input-group">
                <label>SELECT SAVE SLOT</label>
                <div class="save-slots">
                    <div class="save-slot-card" id="slot-1" data-slot="1">
                        <h3>SLOT 1</h3>
                        <div class="slot-info slot-empty">Empty</div>
                    </div>
                    <div class="save-slot-card" id="slot-2" data-slot="2">
                        <h3>SLOT 2</h3>
                        <div class="slot-info slot-empty">Empty</div>
                    </div>
                    <div class="save-slot-card" id="slot-3" data-slot="3">
                        <h3>SLOT 3</h3>
                        <div class="slot-info slot-empty">Empty</div>
                    </div>
                </div>
            </div>
            <div class="input-group" id="aaa-options">
                <label>AAA SETTINGS</label>
                <div class="options-row">
                    <label><input type="checkbox" id="aaa-auto-manage"> Auto AAA management</label>
                    <label><input type="checkbox" id="aaa-auto-promote"> Auto promote/demote</label>
                </div>
                <div id="aaa-status" class="subtext">AAA unlocks in Season 3</div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="main-header">
            <h1 class="game-title">DIAMOND MANAGER</h1>
            <div class="header-nav" style="display: flex; gap: 10px;">
                <button id="view-league-btn" class="nav-btn">LEAGUE</button>
                <button id="view-team-btn" class="nav-btn active">DUGOUT</button>
                <button id="view-stats-btn" class="nav-btn">STATS</button>
                <button id="view-match-btn" class="nav-btn">MATCH</button>
                <div style="width: 1px; background: #333; height: 20px; margin: 0 5px;"></div>
                <button id="options-btn" class="nav-btn" style="border-color:#444; color:#666;">OPTIONS</button>
            </div>
            <div class="header-status">
                <span id="season-display">SEASON 1</span> |
                <span id="league-rank">RANK: 8th</span> |
                <span id="team-budget">BUDGET: $5,000,000</span>
            </div>
        </header>

        <!-- Main Layout -->
        <main class="main-content league-mode">
            <!-- Left: Lineup / Dugout -->
            <section class="panel dugout-panel">
                <div class="panel-header" style="display:flex; justify-content:space-between; align-items:center;">
                    <h2>DUGOUT</h2>
                    <button id="auto-lineup-btn"
                        style="background:var(--accent-green); color:white; border:none; padding:5px 10px; cursor:pointer;">AUTO</button>
                </div>
                <div class="dugout-columns">
                    <div class="dugout-section pitching-section">
                        <div class="section-title">PITCHERS</div>
                        <div class="pitcher-selection" id="rotation-container">
                            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                                <div class="label">PITCHING ROTATION</div>
                                <select id="rotation-size-select"
                                    style="background:#222; color:white; border:1px solid #444; padding:2px;">
                                    <option value="4">4-Man</option>
                                    <option value="5" selected>5-Man</option>
                                    <option value="6">6-Man</option>
                                </select>
                            </div>
                            <!-- Rotation Slots Injected Here -->
                            <div id="rotation-slots"></div>
                        </div>
                        <div class="pitcher-selection" id="bullpen-container">
                            <div class="label">BULLPEN ROLES</div>
                            <div id="bullpen-list"></div>
                        </div>
                    </div>
                    <div class="dugout-section batting-section">
                        <div class="section-title">BATTERS</div>
                        <div class="batting-order" id="batting-order-list">
                            <!-- 1-9 Batters injected here -->
                            <div class="empty-slot">1. Select Batter...</div>
                            <div class="empty-slot">2. Select Batter...</div>
                            <div class="empty-slot">3. Select Batter...</div>
                            <div class="empty-slot">4. Select Batter...</div>
                            <div class="empty-slot">5. Select Batter...</div>
                            <div class="empty-slot">6. Select Batter...</div>
                            <div class="empty-slot">7. Select Batter...</div>
                            <div class="empty-slot">8. Select Batter...</div>
                            <div class="empty-slot">9. Select Batter...</div>
                        </div>
                        <div class="bench-panel">
                            <div class="bench-header">
                                <div class="label">BENCH BATTERS</div>
                                <div class="bench-controls">
                                    <label for="bench-sort-select">SORT</label>
                                    <select id="bench-sort-select">
                                        <option value="overall">OVR</option>
                                        <option value="ops">OPS</option>
                                        <option value="avg">AVG</option>
                                        <option value="hr">HR</option>
                                        <option value="contact">CON</option>
                                        <option value="power">POW</option>
                                        <option value="speed">SPD</option>
                                        <option value="age">AGE</option>
                                        <option value="name">NAME</option>
                                    </select>
                                    <button id="bench-sort-dir" class="nav-btn" type="button">DESC</button>
                                </div>
                            </div>
                            <div id="bench-list"></div>
                        </div>
                    </div>
                    <div class="dugout-section rankings-section">
                        <div class="section-title">LEAGUE POSITION RANKS</div>
                        <div id="position-rankings" class="position-rankings">
                            <div class="empty-slot">Start Season to view rankings</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Center: Stadium (Simulation View) -->
            <section class="panel stadium-panel">
                <div class="scoreboard" id="scoreboard">
                    <div class="sb-team away-team">
                        <div class="sb-name" id="score-away-name">AWAY</div>
                        <div class="sb-score" id="score-away-val">0</div>
                    </div>
                    <div class="sb-info">
                        <div class="sb-inning" id="sb-inning">TOP 1</div>
                        <div class="sb-outs">
                            <span class="dot"></span><span class="dot"></span><span class="dot"></span> Outs
                        </div>
                    </div>
                    <div class="sb-team home-team">
                        <div class="sb-score" id="score-home-val">0</div>
                        <div class="sb-name" id="score-home-name">HOME</div>
                    </div>
                </div>

                <div class="stadium-body-content">
                    <div class="stadium-main">
                        <div class="field-container">
                            <div class="diamond-view">
                                <div class="dirt-circle"></div>
                                <div class="diamond">
                                    <!-- Bases -->
                                    <div class="base first-base" id="base-1"></div>
                                    <div class="base second-base" id="base-2"></div>
                                    <div class="base third-base" id="base-3"></div>
                                    <div class="base home-plate" id="base-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="stadium-side">
                        <div class="match-info">
                            <div id="game-status-text">WAITING FOR MATCH...</div>
                            <div id="pitcher-stamina">PITCHER STAMINA: --</div>
                            <div id="current-matchup">
                                <div class="matchup-batter">BATTER: ---</div>
                                <div class="matchup-vs">VS</div>
                                <div class="matchup-pitcher">PITCHER: ---</div>
                                <div class="matchup-next">NEXT: ---</div>
                            </div>
                            <button id="play-match-btn" class="action-btn" style="margin-top: 10px;">PLAY BALL</button>
                            <div class="match-controls">
                                <div class="match-control-row">
                                    <button id="sim-auto-btn" class="nav-btn">AUTO</button>
                                    <button id="sim-pitch-btn" class="nav-btn">PITCH</button>
                                    <button id="sim-batter-btn" class="nav-btn">BATTER</button>
                                </div>
                                <div class="match-control-row">
                                    <label for="auto-view-select">AUTO VIEW</label>
                                    <select id="auto-view-select">
                                        <option value="batter" selected>Batter-by-Batter</option>
                                        <option value="pitch">Pitch-by-Pitch</option>
                                    </select>
                                </div>
                                <div class="match-control-row">
                                    <label for="bullpen-select">BULLPEN</label>
                                    <select id="bullpen-select"></select>
                                    <button id="sub-pitcher-btn" class="nav-btn">SUB</button>
                                </div>
                                <div class="match-control-row">
                                    <label for="auto-bullpen-toggle">AUTO BP</label>
                                    <input type="checkbox" id="auto-bullpen-toggle" />
                                </div>
                            </div>
                        </div>
                        <div class="game-log" id="game-log">
                            <div class="log-entry">> Welcome to Diamond Manager.</div>
                            <div class="log-entry">> Set your lineup and perform roster moves.</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- League / Menu Panel -->
            <section class="panel league-panel">
                <div class="panel-header">
                    <h2>SEASON OVERVIEW</h2>
                </div>
                <div class="league-content" style="padding: 20px; text-align: center;">
                    <h1 style="font-size: 3rem; color: var(--accent-green); margin-bottom: 10px;">DIAMOND MANAGER</h1>
                    <div id="season-info-area">
                        <p class="menu-subtitle" style="font-size: 1.5rem; color: #aaa;">SEASON 1</p>
                        <button id="start-season-btn" class="cyber-button" style="margin-top:20px;">START
                            SEASON</button>
                    </div>

                    <div id="calendar-area" style="display:none; margin-top: 30px;">
                        <h2>LEAGUE STANDINGS</h2>
                        <div class="standings-table-wrapper">
                            <table class="standings-table" id="standings-table">
                                <thead>
                                    <tr>
                                        <th>RK</th>
                                        <th>TEAM</th>
                                        <th>W</th>
                                        <th>L</th>
                                        <th>PCT</th>
                                        <th>L5</th>
                                        <th>STK</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Injected by JS -->
                                </tbody>
                            </table>
                        </div>
                        <div class="league-actions">
                            <div id="next-opponent-display">NEXT: vs ---</div>
                            <button id="play-match-btn-league" class="cyber-button">ENTER MATCH</button>
                        </div>
                        <div class="goals-card" id="goals-card">
                            <div class="section-header">GOALS</div>
                            <div id="goal-list"></div>
                        </div>
                        <div id="draft-area" style="display:none; margin-top: 20px;">
                            <h2>DRAFT ROOM</h2>
                            <div id="draft-status" class="menu-subtitle">Draft is starting...</div>
                            <div class="draft-actions">
                                <button id="draft-advance-btn" class="cyber-button compact">ADVANCE PICK</button>
                                <button id="draft-best-btn" class="cyber-button compact">DRAFT BEST</button>
                                <button id="draft-need-btn" class="cyber-button compact">DRAFT NEED</button>
                            </div>
                            <div id="draft-list" class="card-list"></div>
                        </div>
                    </div>
                    <div id="team-stats-area" style="display:none; margin-top: 20px;">
                        <div class="stats-layout">
                            <div class="stats-column stats-left">
                                <h2>TEAM STATS</h2>
                                <div class="team-trend-card">
                                    <div class="team-trend-header">
                                        <span>RUNS TREND</span>
                                        <span id="team-trend-legend">R vs RA</span>
                                    </div>
                                    <div id="team-trend-chart" class="team-trend-chart"></div>
                                </div>
                                <div class="standings-table-wrapper">
                                    <table class="standings-table team-stats-table" id="team-stats-table">
                                        <thead>
                                            <tr>
                                                <th>RK</th>
                                                <th data-sort-key="team">TEAM</th>
                                                <th data-sort-key="avg">AVG</th>
                                                <th data-sort-key="ops">OPS</th>
                                                <th data-sort-key="era">ERA</th>
                                                <th data-sort-key="whip">WHIP</th>
                                                <th data-sort-key="runsFor">R</th>
                                                <th data-sort-key="runsAgainst">RA</th>
                                                <th data-sort-key="raPerGame">RA/G</th>
                                                <th data-sort-key="ra9">RA9</th>
                                                <th data-sort-key="opsRank">OPS RK</th>
                                                <th data-sort-key="eraRank">ERA RK</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Injected by JS -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="stats-column stats-right">
                                <div class="player-rank-grid">
                                    <div class="player-rank-section">
                                        <div class="section-header">BATTERS</div>
                                        <table class="standings-table player-rank-table" id="player-rank-batters">
                                            <thead>
                                                <tr>
                                                    <th>RK</th>
                                                    <th data-sort-key="name">PLAYER</th>
                                                    <th data-sort-key="avg">AVG</th>
                                                    <th data-sort-key="ops">OPS</th>
                                                    <th data-sort-key="hr">HR</th>
                                                    <th data-sort-key="games">G</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                    <div class="player-rank-section">
                                        <div class="section-header">PITCHERS</div>
                                        <table class="standings-table player-rank-table" id="player-rank-pitchers">
                                            <thead>
                                                <tr>
                                                    <th>RK</th>
                                                    <th data-sort-key="name">PLAYER</th>
                                                    <th data-sort-key="era">ERA</th>
                                                    <th data-sort-key="whip">WHIP</th>
                                                    <th data-sort-key="ip">IP</th>
                                                    <th data-sort-key="games">G</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Right: Roster / Market -->
            <section class="panel roster-panel">
                <div class="panel-header">
                    <h2>ROSTER / MARKET</h2>
                    <div class="roster-nav">
                        <button id="roster-tab-btn" class="nav-btn active">ROSTER</button>
                        <button id="aaa-tab-btn" class="nav-btn">AAA</button>
                        <button id="market-tab-btn" class="nav-btn">MARKET</button>
                    </div>
                </div>
                <div class="roster-content">
                    <div id="roster-view" class="roster-view active">
                        <div class="section-header">MY ROSTER</div>
                        <div id="roster-list" class="card-list"></div>
                    </div>
                    <div id="aaa-view" class="roster-view">
                        <div class="section-header">AAA ROSTER</div>
                        <div id="aaa-list" class="card-list"></div>
                    </div>
                    <div id="market-view" class="roster-view">
                        <div class="market-nav">
                            <button id="market-fa-tab" class="nav-btn active">FA</button>
                            <button id="market-trade-tab" class="nav-btn">TRADE</button>
                            <button id="market-scout-tab" class="nav-btn">SCOUTING</button>
                        </div>
                        <div id="market-fa-section" class="market-section">
                            <div class="section-header">FREE AGENTS</div>
                            <div id="market-list" class="card-list"></div>
                        </div>
                        <div id="market-trade-section" class="market-section">
                            <div class="section-header">TRADE MARKET</div>
                            <div class="trade-controls">
                                <label for="trade-team-select">TEAM</label>
                                <select id="trade-team-select"></select>
                                <label for="trade-player-select">YOU GIVE</label>
                                <select id="trade-player-select"></select>
                                <label for="trade-target-select">THEY GIVE</label>
                                <select id="trade-target-select"></select>
                                <label for="trade-cash-input">CASH</label>
                                <input type="number" id="trade-cash-input" value="0" min="0" max="500000" step="25000" />
                                <button id="trade-submit-btn" class="cyber-button compact">PROPOSE TRADE</button>
                                <div id="trade-status" class="subtext">Pick a team and players to trade.</div>
                            </div>
                        </div>
                        <div id="market-scouting-section" class="market-section">
                            <div class="section-header">SCOUTING</div>
                            <div class="scouting-controls">
                                <button id="scout-btn" class="cyber-button compact">SCOUT ($75,000)</button>
                                <div id="scout-status" class="subtext">Find 3 prospects</div>
                            </div>
                            <div id="scouting-list" class="card-list compact"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

    </div> <!-- End .app-container -->

    <div id="player-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-header">
                <h3 id="player-modal-title">PLAYER</h3>
                <button id="player-modal-close" class="modal-close">&times;</button>
            </div>
            <div id="player-modal-body" class="modal-body"></div>
            <div class="modal-actions">
                <button id="player-modal-action" class="cyber-button compact">ACTION</button>
                <button id="player-modal-secondary" class="nav-btn">SECONDARY</button>
                <button id="player-modal-cancel" class="nav-btn">CLOSE</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>

</html>
